# 🇲🇽 TICKBASE COMPLIANCE - VARIABLES DE ENTORNO MÉXICO
# Configuración completa para sistema de compliance mexicano

# =================================================================
# KYC/AML PROVIDERS
# =================================================================

# Tecalis KYC (Proveedor Principal - Certificado CNBV)
TECALIS_API_KEY=your_tecalis_production_api_key
TECALIS_WEBHOOK_SECRET=your_tecalis_webhook_secret_key  
TECALIS_ENVIRONMENT=production
# Sandbox: https://sandbox.tecalis.com/v1
# Production: https://api.tecalis.com/v1

# Veridas KYC (Respaldo Bancario)
VERIDAS_API_KEY=your_veridas_api_key
VERIDAS_ENVIRONMENT=production

# Signzy KYC (Global Backup)
SIGNZY_API_KEY=your_signzy_api_key
SIGNZY_REGION=mexico

# =================================================================
# GOVERNMENT APIs - MÉXICO
# =================================================================

# RENAPO - Validación CURP
RENAPO_API_ENDPOINT=https://api.renapo.gob.mx/v1
RENAPO_API_KEY=your_renapo_government_key
RENAPO_TIMEOUT=30000

# SAT - Validación RFC y Reportes
SAT_API_ENDPOINT=https://api.sat.gob.mx/v1
SAT_RFC_VALIDATION=https://api.sat.gob.mx/rfc/validate
SAT_REPORTING_ENDPOINT=https://reportes.sat.gob.mx/fintech
SAT_API_KEY=your_sat_government_key

# UIF - Unidad de Inteligencia Financiera
UIF_REPORTING_ENDPOINT=https://reportes.uif.gob.mx/plataformas
UIF_API_KEY=your_uif_reporting_key
UIF_THRESHOLD_MXN=56000

# =================================================================
# COMPLIANCE DATABASE
# =================================================================

# Base de datos encriptada para reportes (5 años retención)
COMPLIANCE_DB_URL=postgresql://username:password@host:5432/tickbase_compliance
COMPLIANCE_DB_ENCRYPTION_KEY=your_aes_256_encryption_key_here

# Redis para cache de validaciones
REDIS_COMPLIANCE_URL=redis://localhost:6379/2
REDIS_KYC_TTL=3600

# =================================================================
# COMPANY INFORMATION - TICKBASE MÉXICO
# =================================================================

# RFC de la empresa (requerido para reportes SAT)
TICKBASE_RFC=TICK123456ABC
TICKBASE_LEGAL_NAME="TickBase México S.A.P.I. de C.V."
TICKBASE_ADDRESS="Av. Revolución 123, Col. San Ángel, CDMX, CP 01000"
TICKBASE_CONTACT_EMAIL=legal@tickbase.com

# =================================================================
# CNBV COMPLIANCE CONFIGURATION
# =================================================================

# Límites de fees (basis points)
MAX_MARKETPLACE_FEE=300  # 3%
MAX_ROYALTY_FEE=1000     # 10%
MAX_TOTAL_COMBINED=1300  # 13%

# KYC Thresholds (USD)
BASIC_KYC_LIMIT=500
ADVANCED_KYC_LIMIT=3000
ENHANCED_KYC_LIMIT=10000

# Batch minting limit (CNBV compliance)
MAX_BATCH_SIZE=99

# =================================================================
# BIOMETRIC CURP (Obligatorio Octubre 2025)
# =================================================================

BIOMETRIC_CURP_MANDATORY_DATE=2025-10-01
BIOMETRIC_MIN_SCORE=0.85
LIVENESS_DETECTION_REQUIRED=true
MX_LLAVE_INTEGRATION_ENABLED=false  # Disponible Dec 2025

# =================================================================
# SECURITY & ENCRYPTION
# =================================================================

# Encryption keys para datos sensibles
COMPLIANCE_DATA_KEY=your_compliance_encryption_key
KYC_DATA_ENCRYPTION_KEY=your_kyc_data_encryption_key

# JWT para sessions de compliance
JWT_COMPLIANCE_SECRET=your_jwt_secret_for_compliance_sessions

# API Rate limiting
COMPLIANCE_API_RATE_LIMIT=100  # requests per minute
KYC_DAILY_LIMIT=1000          # validations per day

# =================================================================
# MONITORING & ALERTING
# =================================================================

# Webhook endpoints para alertas
COMPLIANCE_WEBHOOK_URL=https://your-app.com/api/compliance/webhook
SLACK_COMPLIANCE_WEBHOOK=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Email para alertas críticas
COMPLIANCE_ALERT_EMAIL=compliance-alerts@tickbase.com

# Monitoring intervals (milliseconds)
TRANSACTION_MONITOR_INTERVAL=60000     # 1 minuto
KYC_STATUS_CHECK_INTERVAL=300000       # 5 minutos
UIF_REPORT_CHECK_INTERVAL=3600000      # 1 hora

# =================================================================
# DEVELOPMENT & TESTING
# =================================================================

# Modo desarrollo (disable real government APIs)
COMPLIANCE_DEV_MODE=false
MOCK_GOVERNMENT_APIS=false

# Testing keys (sandbox)
TECALIS_SANDBOX_KEY=your_sandbox_key
TEST_CURP=CURP123456HABCDEF01
TEST_RFC=RFC123456AB1

# =================================================================
# LOGGING & AUDITING
# =================================================================

# Log levels para compliance
COMPLIANCE_LOG_LEVEL=info
KYC_LOG_LEVEL=debug
TRANSACTION_LOG_LEVEL=info

# Audit trail
AUDIT_LOG_ENABLED=true
AUDIT_RETENTION_DAYS=1825  # 5 años obligatorio México

# External audit service
AUDIT_SERVICE_URL=https://audit.deloitte.com/tickbase
AUDIT_API_KEY=your_audit_service_key

# =================================================================
# BLOCKCHAIN INTEGRATION
# =================================================================

# Base Network configuration
BASE_RPC_URL=https://mainnet.base.org
BASE_CHAIN_ID=8453

# Contract addresses (compliance enabled)
TICKET_NFT_ADDRESS=0x1234567890123456789012345678901234567890
TICKET_FACTORY_ADDRESS=0x2345678901234567890123456789012345678901

# Gas settings para compliance txs
COMPLIANCE_GAS_LIMIT=500000
COMPLIANCE_GAS_PRICE=20000000000  # 20 gwei

# =================================================================
# THIRD PARTY SERVICES
# =================================================================

# Email service para notificaciones
SENDGRID_API_KEY=your_sendgrid_key
COMPLIANCE_FROM_EMAIL=noreply@tickbase.com

# SMS service para 2FA
TWILIO_ACCOUNT_SID=your_twilio_sid
TWILIO_AUTH_TOKEN=your_twilio_token
TWILIO_PHONE_NUMBER=+525512345678

# File storage para documentos KYC
AWS_S3_BUCKET=tickbase-compliance-docs
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1

# CDN para assets estáticos
CLOUDFLARE_ZONE_ID=your_cloudflare_zone
CLOUDFLARE_API_TOKEN=your_cloudflare_token

# =================================================================
# PERFORMANCE & SCALING
# =================================================================

# Database connection pooling
DB_POOL_SIZE=20
DB_CONNECTION_TIMEOUT=5000

# Cache settings
CACHE_TTL_SECONDS=3600
MAX_CACHE_SIZE=1000

# Queue for background processing
REDIS_QUEUE_URL=redis://localhost:6379/3
QUEUE_CONCURRENCY=5

# =================================================================
# BACKUP & DISASTER RECOVERY
# =================================================================

# Backup configuration
BACKUP_ENABLED=true
BACKUP_FREQUENCY=daily
BACKUP_RETENTION_DAYS=1825  # 5 años

# Disaster recovery
DR_REGION=us-west-2
DR_DATABASE_URL=your_backup_database_url

# =================================================================
# EXAMPLE USAGE IN CODE:
# =================================================================

# import { config } from 'dotenv'
# config({ path: '.env.compliance' })
# 
# const tecalisProvider = new TecalisKYCProvider({
#   apiKey: process.env.TECALIS_API_KEY,
#   environment: process.env.TECALIS_ENVIRONMENT
# })
# 
# const monitor = new TransactionMonitor({
#   uif_endpoint: process.env.UIF_REPORTING_ENDPOINT,
#   sat_endpoint: process.env.SAT_REPORTING_ENDPOINT,
#   threshold: parseInt(process.env.UIF_THRESHOLD_MXN)
# })

# =================================================================
# SECURITY NOTES:
# =================================================================

# 1. NEVER commit this file with real values to git
# 2. Use AWS Secrets Manager or similar for production
# 3. Rotate keys every 90 days minimum
# 4. Enable audit logging for all key access
# 5. Use different keys for dev/staging/production
# 6. Encrypt database at rest and in transit
# 7. Enable MFA for all admin access
# 8. Monitor unusual API usage patterns

# =================================================================
# COMPLIANCE CHECKLIST:
# =================================================================

# [ ] CNBV registration completed
# [ ] SAT tax registration updated  
# [ ] UIF reporting agreement signed
# [ ] Tecalis KYC contract executed
# [ ] Legal terms reviewed by counsel
# [ ] Privacy policy updated for Mexico
# [ ] Data retention policies implemented
# [ ] Incident response plan ready
# [ ] Staff compliance training completed
# [ ] External audit scheduled